MAINDEC-10-DAKDA






 
			IDENTIFICATION
			--------------

	PRODUCT CODE:	MAINDEC-10-DAKDA-B-D

	PRODUCT NAME:	DECSYSTEM10 PDP-10 KA10 ARITHMETIC
			RELIABILITY DIAGNOSTIC

	VERSION:	0.2

	DATE RELEASED:	JANUARY 1977

	MAINTAINED BY:	DIAGNOSTIC ENGINEERING GROUP

	AUTHOR:		JOHN R. KIRCHOFF

COPYRIGHT(C) 1970,1977
DIGITAL EQUIPMENT CORPORATION
MARLBORO, MASS. 01752

THIS SOFTWARE IS FURNISHED UNDER A LICENSE FOR USE ONLY
ON A SINGLE COMPUTER SYSTEM AND MAY BE COPIED ONLY WITH
THE INCLUSION OF THE ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE,
OR ANY OTHER COPIES THEREOF, MAY NOT BE PROVIDED OR OTHERWISE
MADE AVAILABLE TO ANY OTHER PERSON EXECPT FOR USE ON SUCH SYSTEM
AND TO ONE WHO AGREES TO THESE LICENSE TERMS.  TITLE TO AND
OWNERSHIP OF THE SOFTWARE SHALL AT ALL TIMES REMAIN IN DEC.

THE INFORMATION IN THIS DOCUMENT IS SUBJECT TO CHANGE WITHOUT
NOTICE AND SHOULD NOT BE CONSTRUED AS A COMMITMENT BY DIGITAL
EQUIPMENT CORPORATION.

DEC ASSUMES NO RESPONSIBILITY FOR THE USE OR RELIABILITY OF ITS
SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.

							DAKDA.TXT
							PAGE 2


			TABLE OF CONTENTS
			-----------------

1.0	ABSTRACT

2.0	REQUIREMENTS

2.1		EQUIPMENT

2.2		STORAGE

2.3		PRELIMINARY PROGRAMS

3.0	PROGRAM PROCEDURES

3.1		LOADING PROCEDURE

3.2		STARTING PROCEDURE

3.3		OPERATING PROCEDURE

4.0	DATA SWITCH FUNCTIONS

5.0	ERRORS

6.0	ITERATION COUNTER

7.0	CYCLE TIME

8.0	OPERATIONAL VARIATIONS

9.0	MISCELLANEOUS

10.0	LISTING

							DAKDA.TXT
							PAGE 3

1.0	ABSTRACT
	--------

	THIS PDP-10 KA10 ARITHMETIC RELIABILITY TEST IS A COMPREHENSIVE
	RELIABILITY TEST USING PSEUDO-RANDOM NUMBERS TO TEST THE
	KA10 PDP-10 FIXED POINT, FLOATING POINT AND BYTE INSTRUCTIONS.
		THE INSTRUCTIONS UNDER TEST ARE COMPARED WITH 
	EACH OTHER AND WITH A HARDWARE OPERATION SIMULATION PROGRAM. 
	A SWITCH HAS BEEN PROVIDED FOR MACHINES WHICH DO NOT HAVE THE
	OPTIONAL INSTRUCTIONS. ERRORS ARE PRINTED ON THE TELETYPE OR
	LINE PRINTER. THE PROGRAM MAY BE OPERATED IN EXEC MODE, USER
	MODE, OR IN A TIME-SHARING SYSTEM.

2.0	REQUIREMENTS
	------------

2.1	EQUIPMENT
	---------

	A PDP-10 KA10 EQUIPPED WITH A MINIMUM OF 32K OF CORE MEMORY.
	CONSOLE TELETYPE
	LINE PRINTER (OPTIONAL)
	DECTAPE FOR PROGRAM STORAGE

2.2	STORAGE
	-------

	THE PROGRAM RUN WITHIN 32K OF MEMORY.

2.3	PRELIMINARY PROGRAMS
	--------------------

	BASIC INSTRUCTION DIAGNOSTICS
	BASIC INSTRUCTION RELIABILITY DIAGNOSTICS
	ADVANCED INSTRUCTION DIAGNOSTICS

							DAKDA.TXT
							PAGE 4

3.0	PROGRAM PROCEDURES
	------------------

3.1	LOADING PROCEDURE
	-----------------

	RUN VIA "DIAMON" OR "MAGMON".

3.2	STARTING PROCEDURE
	------------------

	A.  SELECT OPERATIONAL CONSOLE DATA SWITCH SETTINGS (REFER TO
	    4.0 DATA SWITCH FUNCTIONS).

	B.  IF THE MACHINE DOES NOT HAVE FLOATING POINT/BYTE, OR
	    YOU DO NOT WISH TO TEST THE FLOATING POINT/BYTE 
	    INSTRUCTIONS, SET DATA SWITCHES 'INHFP' AND/OR 'INHBYT'.

	C.  EXEC MODE -

	    STAND-ALONE STARTING ADDRESS IS 30000.

	    RESTART ADDRESS, AFTER POWER DOWN, IS 30005.

	D.  TIME-SHARING MODE -

	    IN USER MODE THE FOLLOWING QUESTIONS WILL BE ASKED TO
	    SELECT THE OPERATIONAL SWITCHES:

		TELETYPE SWITCH CONTROL: ? Y OR N -

		IF YES, THE FOLLOWING:  IF NO, ACTUAL CONSOLE SWITCHES
		ARE USED.

		SPECIFY LH SWITCHES IN OCTAL -

		SPECIFY RH SWITCHES IN OCTAL -

							DAKDA.TXT
							PAGE 5


3.3	OPERATING PROCEDURE
	-------------------

	A.  TO THROUGHLY TEST ALL HARDWARE ALL TEST CONTROL DATA
	    SWITCHES SHOULD BE SET TO 0.

	B.  WHEN DEBUGGING HARDWARE, SET SWITCHES TO 0.  ALLOW THE
	    TELETYPE TO PRINT THE ERROR MESSAGES.  THIS ALLOWS THE
	    PROGRAM TO RUN A COMPLETE PASS AND THEN THE ERROR MESSAGES
	    MAY BE CORRELATED TO QUICKLY DIAGNOSE THE FAILURE.  IF A
	    HARDWARE PROBLEM IS SUCH THAT THE ERROR MESSAGES, AFTER
	    THE FIRST ONE, HAVE NO MEANING SET THE LOOP ON ERROR
	    SWITCH AND RESTART THE PROGRAM.  THE FIRST FAILURE WILL
	    THEN CAUSE THE PROGRAM TO ENTER A LOOP SUITABLE FOR SCOPING.

	C.  WHEN TAKING MARGINS, SET DATA SWITCHES 'NOPNT' AND 'DING'.
	    THIS WILL INHIBIT PRINTOUT BUT WILL ALLOW THE TELETYPE BELL
	    TO BE RUNG WHEN AN ERROR OCCURS. IF THE MARGIN OBTAINED IS
	    UNACCETABLE, THE OPERATOR MAY REVERT TO STANDARD SWITCH
	    SETTINGS. TO INCREASE THE DUTY, FACTOR AND DECREASE THE
	    PROBABILITY OF SIMULATOR FAILURES, SWITCH 'FAST' MAY BE USED.
	    THIS, HOWEVER, IS NOT A COMPLETE TEST OF THE HARDWARE
	    AND SHOULD BE USED WITH CAUTION.

	D.  ERROR INFORMATION MAY BE OBTAINED QUICKLY BY PRINTING
	    ERRORS ON THE LINE PRINTER.

	E.  THE PROGRAM SHOULD RUN SEVERAL HOURS TO ALLOW ENOUGH
	    RANDOM NUMBERS TO BE PROCESSED TO VERIFY SYSTEM
	    RELIABILITY.

							DAKDA.TXT
							PAGE 6

4.0	DATA SWITCH FUNCTIONS
	----------------------

	SWITCH 		STATE	FUNCTION
	------		-----	--------

	0    ABORT	0	NORMAL
			1	ABORT ON PASS COMPLETION

	1    RSTART	0	NORMAL
			1	PRINT TOTALS, RESTART PROGRAM

	2    TOTALS	0	NORMAL
			1	PRINT TOTALS, CONTINUE PROGRAM

	3    NOPNT	0	NORMAL TYPEOUT
			1	INHIBIT ALL PRINT/TYPEOUT
				(EXCEPT FORCED)

	4    PNTLPT	0	NORMAL OUTPUT TO TTY
			1	PRINT ALL DATA ON LPT
				(LOGICAL DEVICE, USER MODE)

	5    DING	0	NO FUNCTION
			1	RING TTY BELL ON ERROR

	6    LOOPER	0	PROCEED TO NEXT TEST
			1	ENTER SCOPE LOOP ON TEST ERROR

	7    ERSTOP	0	PROGRAM CONTINUES FROM ERROR
			1	HALT ON TEST ERROR

	8    PALERS	0	PRINT ONLY FIRST ERROR WHEN LOOPING
			1	PRINT ALL ERRORS, EVEN IF SAME ERROR

	9    RELIAB	0	FAST CYCLE MODE
			1	RELIABILITY MODE

	16   KA50HZ	0	60 CYCLE POWER
			1	50 CYCLE POWER

							DAKDA.TXT
							PAGE 7


4.0	DATA SWITCH FUNCTIONS (CON'T)
	-----------------------------

	RIGHT HALF SWITCHES
	-------------------

	SWITCH		STATE	FUNCTION
	------		-----	--------

	18   ENTDDT	0	MORMAL
			1	ENTER DDT UPON STARTING PROGRAM

	19   RANBAS	0	USE PROGRAM INITIAL RANDOM BASE
			1	SPECIFY RANDOM NUMBER BASE

	28   INHCLK	0	PROCESS CLOCK INTERRUPTS
			1	INHIBIT CLOCK INTERRUPTS

	29   INHMT	0	PRINT SIMULATION MACHINE STATES
			1	PRINT SIMULATION INITIAL/FINAL ONLY

	30   INHFP	0	TEST FLOATING POINT
			1	INHIBIT FLOATING POINT TEST

	31   INHBYT	0	TEST BYTE INSTRUCTION
			1	INHIBIT BYTE TEST

	32   INFFXD	0	TEST FIXED POINT
			1	INHIBIT FIXED POINT TEST

	33   INHSCT	0	NORMAL SIMULATION PRINTOUT
			1	INHIBIT SIMULATION SCT2 AND
				SCT3 PRINTOUT
				(MAKES PRINTOUT SHORTER)

	34   SLOW	0	NORMAL TESTING
			1	RUN JUST SIMULATION COMPARISION
				(DON'T TEST INSTRUCTIONS BY
				COMPARISION WITH EACH OTHER AS IN;
				DIV THEN MUL AND ADD
				REMAINDER, ETC.)

	35   FAST	0	NORMAL TESTING
			1	RUN JUST INSTRUCTION COMPARISION
				(DON'T TEST INSTRUCTIONS BY
				HARDWARE OPERATION SIMULATION
				FOR COMPARISIONS.)

							DAKDA.TXT
							PAGE 8


5.0	ERRORS
	------

	A.  INSTRUCTION ERROR
	    -----------------

	    IF AN INSRUCTION FAILS TO GIVE THE CORRECT RESULTS, THE
	    TEST TITLE, PASS COUNT, TYPE OF FAILURE (INSTRUCTION
	    COMPARISION OR SIMULATION COMPARISION), MACHINE RESULTS,
	    SIMULATION RESULTS AND INSTRUCTION SIMULATION ARE
	    PRINTED.

	B.  SIMULATOR PRINTOUT
	    ------------------

	    WHEN AN ERROR OCCURS THE SIMULATED MACHINE STATES AND
	    REGISTERS ARE PRINTED SO THAT BY USE OF HARDWARE MAINTENANCE
	    SWITCHES, I.E., SINGLE CYCLE AND SC STOP, CONSOLE LIGHTS
	    MAY BE COMPARED TO THE PRINTOUT TO DETERMINE THE EVENT
	    TIME OF THE FAILURE.

	    THE PRINTOUT CONTAINS THE RESULTS OF THE INSTRUCTION
	    UNDER TEST. THIS IS AC, AC+1, E, OR C(E) FOR FIXED AND
	    FLOATING - POINT INSTRUCTIONS; AC, POINTER, C(E) FOR BYTE
	    INSTRUCTIONS. THE FOLLOWING TWO LINES INDICATE THE
	    INSTRUCTION THAT FAILED, INITIAL VALUES, AND SIMULATED
	    RESULTS. THIS IS FOLLOWED BY THE MACHINE TIMES AND 
	    CORRECT CONTENTS OF THE SEVERAL REGISTERS, AFTER THE
	    OCCURANCE OF THE TIME PULSE.

	C.  SCOPE LOOP
	    ----------

	    WHEN PRINTING IS COMPLETE, IF THE 'LOOPER' SWITCH
	    IS SET,THE ROUTINE WILL ENTER A LOOP SUITABLE
	    FOR SCOPING.  AT THIS TIME THE MI REGISTER WILL
	    DISPLAY THE RESULTS OF THE FAILING OPERAND, OR THE
	    FLAGS RESISTER WITH MACHINE RESULTS IN C(LEFT)
	    AND SIMULATED RESULTS IN C(RIGHT). IF THE FAILURE IS NOT
	    FLAGS, THE MI WILL CONTAIN THE FIRST OPERAND THAT
	    FAILED IN THE ORDER OF AC, AC+1, AND C(E).

	D.  TO SCOPE
	    --------

	    1.  ADDRESS OF FAILING INSTRUCTION IS IN AC14
	    2.  SET MAS TO =14
	    3.  SYNC FROM MITO -1 S 37D.

							DAKDA.TXT
							PAGE 9

5.0	ERRORS	(CON'T)
	---------------

	E.  OPERAND STORAGE
	    ---------------

	    IF SOMETHING HAPPENS TO THE PRINTOUT OR YOU ARE NOT SURE
	    WHAT THE ORIGINAL AND FINAL OPERANDS ARE:

	    1.  AC'S ARE SAVED IN LOCATIONS SAVAC THROUGH SAVAC+17.
	    2.  ORIGINAL OPERANDS ARE IN SAVAC+1, 2 AND 3.
	    3.  RESULTS ARE IN AC1, AC2 AND AC3.
	    4.  C(AC1)=C(AC), C(AC2)=C(AC+1), C(AC3)=C(E) OR E.

	    LOOK IN SYMBOL TABLE AT END OF LISTING FOR LOCATION OF SAVAC.

	F.  PROGRAM ERRORS
	    ---------------

	    PROGRAM ERRORS SUCH AS: ILLEGAL UUO'S, PARITY ERRORS,
	    NON-EX-MEMORY, ILLEGAL INTERRUPTS, ETC., ARE HANDLED
	    BY PRINTOUT OF THE TYPE OF ERROR WITH AS MUCH INFORMATION
	    AS IS PERTINENT.

6.0	ITERATION COUNTER
	-----------------

	THE ITERATION COUNT OF THE PROGRAM IS DISPLAYED IN THE
	MEMORY INDICATORS (MI).  THIS COUNT IS A DECREMENTING COUNT
	AND INITIALLY STARTS AT -1 IN STAND-ALONE OPERATION.

7.0	CYCLE TIME
	----------

	THIS PROGRAM IS A RELIABILITY TEST USING RANDOM NUMBERS
	AND AS SUCH SHOULD BE RUN FOR SEVERAL HOURS TO INSURE
	THAT ENOUGH NUMBERS ARE PROCESSED TO VERIFY SYSTEM
	RELIABILITY.

							DAKDA.TXT
							PAGE 10

8.0	OPERATIONAL VARIATIONS
	----------------------

	A.  DIAGNOSTIC MONITOR

	THIS PROGRAM IS USABLE WITH THE DIAGNOSTIC MONITOR TO PROVIDE
	RELIABILITY TESTS, ACCEPTANCE TESTS, AND/OR TO PROVIDE A
	QUICK METHOD OF ISOLATION OF A FAULT TO A PARTICULAR AREA
	OF THE PROCESSOR.  CERTAIN PROCEDURES ARE USED WHEN THE 
	PROGRAM IS USED IN THIS MANNER.  THEY ARE:

	1. THE DIAGNOSTIC MONITOR TRANSFERS CONTROL TO THE PROGRAM
	   AND STARTS IT AT LOCATION 30002.

	2. MONCTL - LOCATION 30043 IS USED AS THE DIAGNOSTIC MONITOR
	   CONTROL WORD.
		LH = 0, STAND-ALONE OPERATION
		    -1, RUNNING UNDER DIAGNOSTIC MONITOR

		RH = RIGHT HALF OF CONSOLE SWITCHES IF UNDER
		     DIAGNOSTIC MONITOR CONTROL.

	B.  USER MODE

	TO OUTPUT THE PRINTED ERROR MESSAGES TO A USER SPECIFIED
	DEVICE IN USER MODE, ASSIGN THE DESIRED OUTPUT DEVICE TO
	DEVICE NAME 'DEV' AND SET SWITCH 'PNTLPT'.  THE PHYSICAL
	DEVICE CAN BE ANY DEVICE THAT CAN ACCEPT ASCII FORMAT
	SUCH AS LPT, DSK, DTA, ETC.  THE CORRESPONDING OUTPUT
	FILE IS 'DAKDA.TMP'.

	EXAMPLE DEVICE ASSIGNMENT:

	.ASSIGN DSK DEV

	IN USER MODE THE PROGRAM WILL MAKE TWO PASSES AND THEN RETURN
	TO MONITOR MODE.

	THE OUTPUT FILE (IF USED) MAY THEN BE PRINTED BY USING THE
	NORMAL MONITOR COMMANDS (R PRINT, LIST, TYPE, ETC.).

	IF THE PROGRAM IS ABORTED BEFORE COMPLETION (BY ^C, ETC.) THE
	OUTPUT FILE MAY THEN BE CLOSED BY USING THE MONITOR 'REENTER'
	COMMAND.

							DAKDA.TXT
							PAGE 11

8.0	OPERATIONAL VARIATIONS  (CON'T)
	-------------------------------

	C.  SYSTEM EXERCISER

	    STARTING ADDRESS IS 30003.  DATA SWITCHES ARE PRESTORED
	    IN 'SWTEXR' LOCATION 30023.

9.0	MISCELLANEOUS
	-------------

	THIS PROGRAM, DAKDA, CAN ONLY BE USED ON PDP-10 SYSTEMS THAT
	HAVE KA10 ECO49 INSTALLED.

10.0	LISTING
	-------
   