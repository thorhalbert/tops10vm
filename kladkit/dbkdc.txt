MAINDEC-10-DBKDC






 
			IDENTIFICATION
			--------------

	PRODUCT CODE:	MAINDEC - 10 - DBKDC - B - D

	PRODUCT NAME:	DECSYSTEM10 KI10 IOT/PI SYSTEM RELIABILITY TEST

	VERSION:	0.2

	DATE RELEASED:	JULY 1,1976

	AUTHOR:		JOHN R. KIRCHOFF
			RICHARD P. MALISKA

	MAINTAINED BY:	DIAGNOSTIC ENGINEERING GROUP

		COPYRIGHT 1972,1976
		DIGITAL EQUIPMENT CORPORATION
		MARLBORO, MASS. 01752

THIS SOFTWARE IS FURNISHED TO PURCHASER UNDER A LICENSE FOR USE
ON A SINGLE COMPUTER SYSTEM AND CAN BE COPIED (WITH INCLUSION OF
DEC'S COPYRIGHT NOTICE) ONLY FOR USE IN SUCH SYSTEM, EXCEPT AS
MAY OTHERWISE BE PROVIDED IN WRITING BY DEC.

THE INFORMATION IN THIS DOCUMENT IS SUBJECT TO CHANGE WITHOUT
NOTICE AND SHOULD NOT BE CONSTRUED AS A COMMITMENT BY DIGITAL
EQUIPMENT CORPORATION.

DEC ASSUMES NO RESPONSIBILITY FOR THE USE OR RELIABILITY OF ITS
SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
						MAINDEC-10-DBKDC.TXT
							PAGE 2


			TABLE OF CONTENTS
			-----------------

1.0	ABSTRACT

2.0	REQUIREMENTS

2.1	EQUIPMENT

2.2	STORAGE

2.3	PRELIMINARY REQUIREMETS

3.0	PROGRAM PROCEDURES

3.1	LOADING PROCEDURE

3.2	STARTING PROCEDURE

3.3	OPERATING PROCEDURE

3.4	DATA SWITCHES

4.0	ERRORS

5.0	ITERATION COUNTER

6.0	CYCLE TIME

7.0	OPERATIONAL VARIATIONS

8.0	MISCELLANEOUS

9.0	LISTING
						MAINDEC-10-DBKDC.TXT
							PAGE 3


1.0	ABSTRACT

	THIS PDP-10/KI10 INSTRUCTION RELIABILITY DIAGNOSTIC IS THE FOURTEENTH
	IN A SERIES OF PDP-10/KI10 PROCESSOR DIAGNOSTICS. THE DIAGNOSTIC
	TESTS THE PRIORITY INTERRUPT SYSTEM THE PROCESSOR IOTS AND
	THE INTERRUPTABILITY OF MOST CLASSES OF INSTRUCTIONS.
	IT ALSO CHECKS PARITY ERROR INTERRUPTS, NON-EX-MEM INTERRUPTS
	TTY INTERRUPTS, ADDRESS BREAKS, BLT INSTRUCTIONS

2.1	EQUIPMENT

	A PDP-10/KI10 WITH A MINIMUM OF 32K OF MEMORY
	PAPER TAPE READER (OPTIONAL)
	CONSOLE TELETYPE
	DECTAPE OR MAGTAPE

2.2	STORAGE

	THE PROGRAM FITS INTO THE FIRST 32K OF CORE.
	PROGRAM BEGINS AT 30000(8).

2.3	PRELIMINARY REQUIREMENTS

	CONSOLE FUNCTIONS WORKING PROPERLY
	READ-IN WORKING PROPERLY
	ALL DIAGNOSTICS UP TO THIS TEST WORKING
	CONSOLE TTY WORKING PROPERLY
	MAGTAPE CONTROL AND OR DECTAPE CONTROL AND TRANSPORTS
	WORKING PROPERLY
						MAINDEC-10-DBKDC.TXT
							PAGE 4
3.0	PROGRAM PROCEDURES

3.1	LOADING PROCEDURE

	RUN WITH "DIAMON".

3.2	STARTING PROCEDURE

	STAND-ALONE STARTING ADDRESS IS 30000.

3.3	OPERATING PROCEDURE

	ONCE STARTED THE PROGRAM WILL CYCLE CONTINUALLY UNTIL STOPPED
	OR AN ERROR OCCURS.

3.4	DATA SWITCHES

	SWITCH		POSITION	FUNCTION
	------		--------	--------

	0		0		NORMAL
			1		ABORT ON PASS COMPLETION

	1		0		-
			1		RESTART TEST, PRINT TOTALS

	2		0		-
			1		PRINT TOTALS

	3		0		-
			1		INHIBIT TYPEOUT
					(EXCEPT FORCED)

	4		0		PRINT ON TTY
			1		PRINT ON LPT

	5		0		-
			1		RING BELL ON ERROR

	6		0		-
			1		LOOP ON ERROR

	7		0		-
			1		HALT ON ERROR

	8		0		PRINT ONLY ONE ERROR PER PC LOC
			1		PRINT ALL ERROR OCCURENCES

	9		0		QUICK VERIFY MODE
			1		RELIABILITY MODE

	10		0		FULL ERROR MESAGES
			1		INHIBIT TXT PART OF ERROR MESSAGES
						MAINDEC-10-DBKDC.TXT
						PAGE 5

3.4	DATA SWITCHES (CON'T)

	SWITCH		POSITION	FUNCTION
	------		--------	--------

	18		1		INHIBIT ADDRESS BREAK TEST
			0		ALLOW ADDRES BREAK TEST

	19		1		INHIBIT INSTRUCTION INTERRUPT TEST
			0		ALLOW INSTRUCTION INTERRUPT TEST

	20		0		INHIBIT CLOCK TEST
			1		ALLOW CLOCK TEST

	21		1		INHIBIT BLT TEST
			0		ALLOW BLT TEST

	22		1		INHIBIT PARITY TEST (INHIBITED IF
					MARGINS MANUAL IS NOT SET)
			0		ALLOW PARITY TEST


	23		1		INHIBIT DEVICE IOT TEST
			0		ALLOW DEVICE IOT TEST

	24		1		INHIBIT "NON-EX-MEM" TEST (INHIBITED
					IF MEMSIZ =256K)
			0		ALLOW "NON-EX-MEM" TEST
						MAINDEC-10-DBKDC.TXT
						PAGE 6

3.4	TEST DESCRIPTION

3.4.0	ADDRESS BREAK TEST
	CHECKS THE ALITY TO ADRESS BREAK ON RANDOM
	ADDRESESSES ON DATA FETCH AND TO BREAK ON
	SPECIFIC ADRESSES ON DATA WRITE AND INSTRUCTION FETCH
	THIS TEST CAN BE INHIBITTED VIA CONSOLE SWITCH 18 SET
	TO 1 OR MI PROGRAM DISABLE SET.

3.4.1	INSTRUCTION INTERRUPT TEST
	ALL NON SKIPPING INSTRUCTIONS ARE CHECKED FOR THEIR
	ABILITY TO BE INTERRUPTED FROM.
	INHIBITED VIA CONSOLE SWITCH 19 SET TO 1

3.4.2	BASIC CLOCK TEST
	CHECKS THAT THE CLOCK WILL INTERRUPT
	ON RANDOM CHANNELS. (THIS PROGRAM HAS A RATHER 
	LONG DELAY SO IT WILL NORMALLY NOT BE DONE UNLESS
	REQUESTED VIA CONSOLE SWITCH 20 =1)

3.4.3	BLOCK TRANSFER TEST
	CHECKS THAT BLT'S DO ALL THE RIGHT
	THINGS WHEN THEY ARE INTERRUPTED
	INHIBBITED VIA CONSOLE STCH 21 = 1

3.4.4	DEVICE IOT TEST
	CHECKS THAT A DEVICE ON THE IO BUSS
	WILL GENERATE INTERRUPTS AND THAT THE PROCESSOR WILL
	ACKNOWLEDGE THEM
	IN THIS CASE THE CONSOLE TTY IS USED AS
	THE I/O DEVICE

3.4.5	PARITY TEST
	CHECKS THAT PARITY ERRORS CAN BE GENERATED AND DETECTED ON
	THE ERROR PIA.
	INHIBBIT VIA CONSOLE SWITCH 25 SET TO 1 OR MARGINS MANUAL
	NOT SET.(THIS IS NEEDED BECAUSE EVEN PARITY CAN NOT BE
	WRITTEN INTO MEMORY UNLESS IT IS SET.)

3.4.6	NON-EX-MEM TEST
	CHECKS THAT NONEXISTENT MEMORY CAN BE GENERATED
	AND DETECTED ON THE APR ERROR PIA
	THIS IS INHIBITED VIA CONSOLE SWITCH 26 = 1 OR MEMORY
	SIZE IS EQUAL TO 256K.
						MAINDEC-10-DBKDC.TXT
							PAGE 7

4.0	ERRORS

	ERRORS ARE PRINTED ON THE TTY OR LINE PRINTER.  THE ERROR 
	PRINTOUT CONTAINS THE TEST TITLE, THE PC OF THE FAILURE, ERROR
	NUMBER AND THE CONTENTS OF AN APPLICABLE AC.

	THE PC VALUE IS USEFUL IN RELATING THE FAILURE TO THE LISTING.

	WHEN THE SCOPE LOOP MODE IS USED THE MI REGISTER WILL COUNT 
	FOR EACH OCCURANCE OF AN ERROR.  IF AN AUDIO INDICATION OF
	A CONTINUING ERROR IS DESIRED THE 'DING' SWITCH MAY BE SET.

5.0	ITERATION COUNTER

	THE ITERATION COUNT OF THE PROGRAM IS DISPLAYED IN THE MEM-
	ORY INDICATORS (MI).  THIS COUNT IS A DECREMENTING COUNT AND
	INITIALLY STARTS AT -1 IN STAND-ALONE OPERATION.

6.0	CYCLE TIME

	THE CYCLE TIME OF THE PROGRAM IS IN THE MILLISECOND RANGE AND
	IS THEREFORE SUITABLE FOR TAKING MARGINS, VIBRATION TESTS, ETC.

7.0	OPERATIONAL VARIATIONS

	A.  DIAGNOSTIC MONITOR

	    THE PROGRAM IS USABLE WITH THE DIAGNOSTIC MONITOR TO PRO-
	    VIDE RELIABILITY TESTS, ACCEPTANCE TESTS, AND/OR TO PRO-
	    VIDE A QUICK METHOD OF ISOLATION OF A FAULT TO A PARTICULAR
	    AREA OF THE PROCESSOR.  CERTAIN PROCEDURES ARE USED WHEN
	    THE PROGRAM IS USED IN THIS MANNER.  THEY ARE:

	    1.  THE DIAGNOSTIC MONITOR TRANSFERS CONTROL TO THE PRO-
		GRAM AND STARTS IT AT LOCATION 30002.

	    2.  MONCTL - LOCATION 30042 IS USED AS THE DIAGNOSTIC MON-
		ITOR CONTROL FLAG WORD.
	    3.  MONFLG - LOCATION 30043 DENOTES ABILITY TO RUN UNDER
		SPECIAL DIAGNOSTIC MONITOR

	B.  USER MODE

	THIS PROGRAM WILL RUN IN "SPECIAL" USER MODE UNDER CONTROL
	OF THE DIAGNOSTIC MONITOR, IT WILL NOT HOWEVER RUN UNDER
	NORMAL TIMESHARING CONDITIONS.
						MAINDEC-10-DBKDC.TXT
							PAGE 8

8.0	MISCELLANEOUS

	THE NON-EX-MEMORY STOP SWITCH SHOULD BE RESET (0).
	THE PARITY STOP SWITCH SHOULD BE RESET (0).
	THE PROGRAM WILL NOT RUN IN SINGLE PULSE OR SINGLE INSTRUCTION
	TO ALLOW MAXIMUM TESTING THE MARGIN ENABLE SWITCH MUST BE SET
	AND THE MI PROGRAM DISABLE SWITCH MAY NOT BE SET.
	ADDRESS SWITCHES MUST NOT BE CAHNGED DURING THE TEST. IF
	THEY ARE YOU MAY CAUSE FALSE ERRORS IN THE ADRESS BREAK TEST.

8.1	CERTAIN LOCATIONS ARE RESERVED TO KEEP TRACK OF THE VARIOUS
	TESTS.	THEY ARE:

	ERRCNT			KEEPS TRACK OF THE NUMBER OF INTERRUPTS
				GOTTEN ON THE ERROR PIA
	ERRCHN			LAST ERROR PIA ASSIGNMENT
	CLKCHN			THE LAST APR CLOCK ASSIGNMENT
	INSCNT			THE NUMBER OF TIMES THE INSTRUCTION
				INTERRUPTIN TEST WAS DONE
	INTCNT-INTCNT+7		NUMBER OF INTERRUPTS ON EACH CHANNEL
				GENERATED BY THE APR CLOCK
	SPRCNT			NUMBER OF SPURIOUS INTERRUPTS
	CURRENT			THE LAST INSTRUCTION TESTED IN THE
				INSTRUCTION INTERRUPT TEST
	PARGEN			THE TOTAL NUMBER OF PROGRAM GENERATED
				PARITY ERRORS
	BRKS			THE TOTAL NUMBER OF PROGRAM ADRESS BREAKS
	BRKADR			THE LAST ADDRESS USED FOR ADDRESS BREAK
	TTYCNT			TOTAL NUMBER OF TTY GENERATED INTERRUPTS
	TOTNXM			TOTAL NUMBER OF PROGRAM GENERATED NON-
				EXISTENT MEMORY INTERRUPTS

9.0	LISTING
    