;DDQDF







				IDENTIFICATION
				--------------

	PRODUCT CODE:		AH-7155E-DD

	DIAGNOSTIC CODE:	DDQDF

	PRODUCT NAME:	 	DDQDFE0 DIAGNOSTIC DISTRIBUTION
				MAGTAPE CREATOR

	VERSION:		0.5

	DATE RELEASED:		MAY 1978

	MAINTAINED BY:		DIAGNOSTIC ENGINEERING

	AUTHOR:			JOHN R. KIRCHOFF

		        COPYRIGHT (C) 1976, 1978

	        DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.

	THIS SOFTWARE IS FURNISHED UNDER A LICENSE FOR  USE  ONLY  ON  A
	SINGLE COMPUTER SYSTEM AND MAY BE COPIED ONLY WITH THE INCLUSION
	OF THE ABOVE COPYRIGHT NOTICE.   THIS  SOFTWARE,  OR  ANY  OTHER
	COPIES  THEREOF, MAY NOT BE PROVIDED OR OTHERWISE MADE AVAILABLE
	TO ANY OTHER PERSON EXCEPT FOR USE ON SUCH SYSTEM AND TO ONE WHO
	AGREES  TO  THESE  LICENSE TERMS.  TITLE TO AND OWNERSHIP OF THE
	SOFTWARE  SHALL  AT   ALL  TIMES  REMAIN  IN  DIGITAL  EQUIPMENT
	CORPORATION.

	THE INFORMATION IN THIS DOCUMENT IS SUBJECT  TO  CHANGE  WITHOUT
	NOTICE  AND  SHOULD  NOT BE CONSTRUED AS A COMMITMENT BY DIGITAL
	EQUIPMENT CORPORATION.

	DIGITAL EQUIPMENT CORPORATION ASSUMES NO  RESPONSIBILITY FOR THE
	USE  OR  RELIABILITY  OF  ITS SOFTWARE IN EQUIPMENT WHICH IS NOT
	SUPPLIED BY DIGITAL EQUIPMENT CORPORATION.
MAINDEC-10-DDQDF						PAGE 2
MAGTAP
			TABLE OF CONTENTS
			-----------------

1.0	ABSTRACT				PAGE 3

2.0	THE DIAGNOSTIC MAGTAPE			PAGE 3

3.0	STARTING PROCEDURE			PAGE 4

4.0	COMMAND DESCRIPTIONS			PAGE 5
4.1	HELP COMMAND				PAGE 5
4.2	GET COMMAND				PAGE 5
4.3	DIRECTORY COMMAND			PAGE 6
4.4	FDIRECTORY COMMAND			PAGE 6
4.5	CHECK COMMAND				PAGE 6
4.6	UNLOAD COMMAND				PAGE 7
4.7	EXIT COMMAND				PAGE 7
4.8	REWIND COMMAND				PAGE 7
4.9	TAPE COMMAND				PAGE 7
4.10	MAKE COMMAND				PAGE 8
4.11	VERIFY COMMAND				PAGE 11
4.12	/LIST COMMAND				PAGE 11
4.13	WILD FILE NAMES				PAGE 11
4.14	/GROUP	COMMAND				PAGE 12
4.15	/TYPE COMMAND				PAGE 13
4.16	SEARCH COMMAND				PAGE 13
4.17	OPTION COMMAND				PAGE 14
4.18	NUMBER COMMAND				PAGE 14

5.0	DIRECTORY FILE DESCRIPTION MAGTAP.MTA	PAGE 15

6.0	BOOTSTRAP FILE MAGTAP.RDI		PAGE 16
6.1	READ-IN ON A TM10			PAGE 16
6.2	READ-IN ON A DX10			PAGE 17
6.3	READ-IN ON AN RH10			PAGE 17

7.0	ERRORS					PAGE 18
MAINDEC-10-DDQDF						PAGE 3
MAGTAP


1.0	ABSTRACT
	--------

THE DIAGNOSTIC DISTRIBUTION MAGTAPE CREATOR PROGRAM IS A USER MODE
PROGRAM THAT IS USED TO CREATE AND READ DIAGNOSTIC DISTRIBUTION
MAGTAPES.  THIS PROGRAM SHOULD PROVIDE ALL THAT IS NECESSARY TO
EASILY CREATE ANY MAGTAPE THAT CAN BE READ BY THE DIAGNOSTIC
MAGTAPE MONITOR (MAGMON).  THIS PROGRAM WILL ALSO PROVIDE A
SIMPLE METHOD OF TRANSFERRING FILES FROM A DIAGNOSTIC MAGTAPE
TO DISK.

2.0	THE DIAGNOSTIC MAGTAPE
	----------------------

A DIAGNOSTIC MAGTAPE IS WRITTEN IN STANDARD DIGITAL COMPATIBLE
FORMAT.  EACH FILE IS DIVIDED INTO 512 WORD RECORDS AND ENDS
WITH ONE END OF FILE MARK.  A SECOND END OF FILE MARK IS PLACED
AT THE END OF THE LAST FILE ON TAPE.

THE FIRST SIX FILES ON THE TAPE MUST ALWAYS BE AS FOLLOWS:

0. MAGTAP.RDI - A READ-IN BOOTSTRAP
1. MAGTAP.SAV - THIS MAGTAP PROGRAM
2. MAGMON.SAV - DIAGNOSTIC LOADER PROGRAM
3. MAGTAP.MTA - DIRECTORY OF TAPE READABLE BY MAGMON
		AND MAGTAP PROGRAMS
4. MAGTAP.DIR - PRINTABLE DIRECTORY OF THE MAGTAPE
5. THE FILE USED BY MAGTAP PROGRAM TO MAKE THE TAPE

ANY NUMBER OF FILES MAY FOLLOW.  THE MAXIMUM NUMBER OF FILES WILL
BE LIMITED ONLY BY THE LENGTH OF THE TAPE.
MAINDEC-10-DDQDF						PAGE 4
MAGTAP

3.0	STARTING PROCEDURE
	------------------

THIS MAGTAP PROGRAM WILL RUN IN USER MODE ONLY.  WHEN RUNNING UNDER
A TOPS-20 MONITOR, THE TOPS-10 UUO SIMULATION FACILITY MUST BE AVAILABLE.
THE FOLLOWING COMMANDS MUST BE TYPED TO A TOPS-20 MONITOR (MTA0 USED AS
EXAMPLE MAGTAPE UNIT NAME):

		@ASSIGN MTA0
		@SET TAPE DENSITY 800(1600) BPI

SUPPLYING APPROPRIATE TAPE DENSITY.  SIMILAR TOPS-10 COMMANDS MAY
BE TYPED BUT ARE NOT REQUIRED.

IF THE PROGRAM IS ALREADY IN A DISK DIRECTORY, THE PROGRAM CAN BE
STARTED SIMPLY BY TYPING:

		RUN MAGTAP.SAV

IF THE MAGTAP PROGRAM IS NOT ON DISK, IT MUST BE RETRIEVED FROM THE
DIAGNOSTIC MAGTAPE.  MOUNT THE MAGTAPE ON A TAPE DRIVE THEN
FOLLOW THE APPROPRIATE EXAMPLE BELOW (IN THE EXAMPLES, THE TAPE
DRIVE IS ASSUMED TO BE MTA0):

	IF TOPS-10 MONITOR:
		.ASSIGN MTA0:
		.REWIND MTA0:
		.SET DENSITY MTA0: 800(1600) BPI
		.SET BLOCKSIZE MTA0: 512 WORDS
		.SKIP MTA0: 1 FILE
		.COPY MAGTAP.SAV=MTA0:

	IF TOPS-20 MONITOR:
		@ASSIGN MTA0:
		@REWIND MTA0:
		@SET TAPE DENSITY 800(1600) BPI
		@SKIP MTA0: 1 FILE
		@COPY (FROM) MTA0: (TO) MAGTAP.SAV

UPON STARTING, THE MAGTAP PROGRAM WILL PRINT ITS NAME AND VERSION
NUMBER THEN WILL ASK FOR THE NAME OF THE MAGTAPE DEVICE IT SHALL
USE:

		MAGTAPE DEVICE -
MAINDEC-10-DDQDF						PAGE 5
MAGTAP

RESPOND BY TYPING A LOGICAL OR PHYSICAL NAME FOR A MAGNETIC TAPE
DEVICE.  A CHECK WILL BE MADE THAT THE DEVICE SELECTED IS AVAILABLE
AND IS A MAGTAPE DEVICE.  IF THE TAPE UNIT HAS THE CAPABILITY OF
READING AND WRITING AT 1600 BPI, THE FOLLOWING IS ASKED:

		WHAT DENSITY? (800 OR 1600) -

EITHER 800 OR 1600 MUST BE TYPED.

THE MAGTAP PROGRAM WILL NOW BE READY TO ACCEPT ANY COMMANDS AND WILL
PROMPT WITH:

		COMMAND -

4.0	COMMAND DESCRIPTIONS
	--------------------

THE MAGTAPE PROGRAM PERFORMS ALL OPERATIONS IN RESPONSE TO COMMANDS
TYPED BY THE USER.  COMMANDS CONSIST OF A VERB FOLLOWED BY OPTIONAL
ARGUMENTS.  A SEPARATOR CHARACTER (SPACE, TAB OR COMMA) MUST
SEPARATE THE COMMAND FROM ANY ARGUMENTS THAT MAY FOLLOW.  A COMMA
MUST BE USED BETWEEN ARGUMENTS IF MORE THAN ONE.  EVERY COMMAND
LINE MUST END WITH A CARRIAGE RETURN.

THE COMMAND VERB CAN BE ABBREVIATED TO ANY EXTENT AS LONG AS THE
ABBREVIATION IS UNIQUE.  IN THIS VERSION OF MAGTAP, NO TWO COMMANDS
START WITH THE SAME LETTER.  THEREFORE, ALL COMMANDS MAY BE ABBRE-
VIATED BY TYPING ONLY ONE LETTER.  THIS MAY NOT BE TRUE IN LATER
VERSIONS, HOWEVER.

4.1	HELP COMMAND
	------------

THE HELP COMMAND WILL CAUSE A BRIEF DESCRIPTION OF MAGTAP COMMANDS
TO BE PRINTED ON THE USER'S TERMINAL.  ALL ARGUMENTS ARE IGNORED.

4.2	GET COMMAND
	-----------

THE GET COMMAND IS USED TO COPY FILES FROM MAGTAPE TO THE DISK.  THE
GET COMMAND MAY BE FOLLOWED BY A LIST OF FILE SPECIFICATIONS IN THE
FORM FILE.EXT.  BOTH THE FILENAME AND EXTENSION MUST BE SPECIFIED.
IF JUST THE GET COMMAND IS TYPED, MAGTAPE WILL COPY ALL OF THE FILES
FROM THE MAGTAPE TO THE DISK.  IF ONE OR MORE FILES ARE SPECIFIED,
ONLY THOSE FILES WILL BE COPIED TO DISK.

IN ADDITION, THE OPTIONAL /GROUP:ARG AND /TYPE:ARG SWITCHES MAY BE
USED TO COPY ONLY THE SELECTED FILE GROUPINGS AND/OR SELECTED FILE
TYPES TO THE DISK.

ALL FILES COPIED TO DISK ARE GIVEN THEIR ORIGINAL FILE NAME AND
EXTENSION.  THE ORIGINAL CREATION DATE AND VERSION NUMBER ALSO
ARE MAINTAINED.
MAINDEC-10-DDQDF						PAGE 6
MAGTAP

4.3	DIRECTORY COMMAND
	-----------------

THE DIRECTORY COMMAND SHOULD BE USED TO RETRIEVE THE DIRECTORY OF THE
MAGTAPE.  THE DIRECTORY FILE MAGTAP.DIR WILL BE READ FROM THE MAGTAPE
AND PRINTED ON THE USER'S TERMINAL.

OPTIONALLY, A DEVICE NAME CAN BE SPECIFIED IMMEDIATELY AFTER THE
DIRECTORY COMMAND.  IF PRESENT, THE DIRECTORY WILL BE COPIED TO THAT
DEVICE.  ANY DEVICE THAT CAN ACCEPT ASCII MODE OUTPUT CAN BE SPECIFIED.
FOR EXAMPLE, TO PRINT THE DIRECTORY OF THE MAGTAPE ON A LINE PRINTER
TYPE:

		DIRECTORY LPT

4.4	FDIRECTORY COMMAND
	------------------

THE FDIRECTORY COMMAND SHOULD BE USED INSTEAD OF THE DIRECTORY COMMAND
WHEN A FASTER DIRECTORY IS DESIRED.  THIS COMMAND WILL PRINT ONLY
THE FILE NAMES AND EXTENSIONS OF THE FILES ON THE MAGTAPE.  FOUR
NAMES WILL BE PRINTED ON EACH LINE.

AN OPTIONAL DEVICE NAME CAN BE SPECIFIED AS IN THE DIRECTORY
COMMAND.

4.5	CHECK COMMAND
	-------------

THE CHECK COMMAND PROVIDES A SIMPLE METHOD OF DETERMINING WHETHER
THE MAGTAPE CAN BE READ.  THE CHECK COMMAND MAY BE FOLLOWED BY A
LIST OF FILE SPECIFICATIONS.  IF JUST THE CHECK COMMAND IS TYPED,
THE ENTIRE TAPE IS CHECKED.  IF ONE OR MORE FILES ARE SPECIFIED,
ONLY THOSE FILES WILL BE CHECKED.

IN ADDITION, THE OPTIONAL /GROUP:ARG AND /TYPE:ARG SWITCHES MAY BE
USED TO CHECK ONLY THE SELECTED FILE GROUPINGS AND/OR SELECTED FILE
TYPES.

THE CHECK PROCESS INVOLVES READING THE MAGTAPE DIRECTORY AND SPACING
TO THE FILE TO BE CHECKED.  THE DATA BLOCKS ARE THEN READ TO DETERMINE
THAT THERE ARE NO HARD READ ERRORS.  FILES WITH EXTENSIONS A8, A10, A11,
TIC AND RAM ARE CHECKED FOR PROPER DATA FORMAT AND INTERNAL CHECKSUMS
ARE VERIFIED.
MAINDEC-10-DDQDF						PAGE 7
MAGTAP

4.6	UNLOAD COMMAND
	--------------

THE UNLOAD COMMAND WILL CAUSE THE TAPE TO BE UNLOADED.  THE PROGRAM
THEN EXITS TO MONITOR COMMAND LEVEL.

4.7	EXIT COMMAND
	------------

THE EXIT COMMAND CAUSES THE PROGRAM TO EXIT TO MONITOR COMMAND LEVEL
WITHOUT UNLOADING THE TAPE.

4.8	REWIND COMMAND
	--------------

THE REWIND COMMAND WILL CAUSE THE MAGTAPE TO BE REWOUND AND THE
IN-CORE DIRECTORY TO BE CLEARED, FORCING THE DIRECTORY TO BE READ
FROM THE MAGTAPE ON THE NEXT GET, CHECK, VERIFY, DIRECTORY OR
FDIRECTORY COMMAND.

THIS COMMAND IS PROVIDED FOR THE USER'S CONVENIENCE.  IT SHOULD
NEVER BE REQUIRED FOR NORMAL OPERATIONS.

4.9	TAPE COMMAND
	------------

THE TAPE COMMAND IS USED TO SELECT A NEW MAGTAPE DEVICE.  THE TAPE
COMMAND MUST BE FOLLOWED BY A DEVICE NAME.  IF THE DEVICE SPECIFIED
IS NOT A MAGTAPE DEVICE,

		MAGTAPE DEVICE -

WILL BE ASKED.  NOW RESPOND WITH THE CORRECT DEVICE NAME.

IF THE TAPE UNIT SELECTED HAS THE CAPABILITY OF READING AND WRITING
AT 1600 BPI, THE FOLLOWING WILL BE ASKED:

		WHAT DENSITY? (800 OR 1600) -

EITHER 800 OR 1600 (OR ANY ABBREVIATION) MUST BE TYPED.

A TAPE COMMAND IS AUTOMATICALLY CALLED WHENEVER THE MAGTAP
PROGRAM IS STARTED OR RESTARTED.

IF AN ALTMODE CHARACTER IS TYPED AS THE DEVICE NAME, NO
MAGTAPE DEVICE WILL BE SELECTED.  THIS FEATURE WAS ADDED FOR DEBUG
PURPOSES, BUT MAY BE USEFUL AT TIMES.  THE HELP, NUMBER AND MAKE
COMMANDS MAY BE USED WITH NO MAGTAPE DEVICE SELECTED.  THE MAKE
COMMAND WILL CREATE THE DIRECTORY FILES ON DISK, THEN WILL EXIT
BEFORE ATTEMPTING TO WRITE THE TAPE.
MAINDEC-10-DDQDF						PAGE 8
MAGTAP

4.10	MAKE COMMAND
	------------

THE MAKE COMMAND IS USED TO CREATE A MAGTAPE.  MAGTAP REQUIRES THAT
THE FOLLOWING FILES BE ACCESSIBLE ON DISK:

		MAGTAP.SAV
		MAGMON.SAV
		MAGTAP.RDI AND/OR DXMPA.A8

TO SPECIFY THE FILES THAT ARE TO BE WRITTEN ONTO THE MAGTAPE, A LIST
OF FILE SPECIFICATIONS IN THE FORM FILE.EXT SEPARATED BY A COMMA MUST
FOLLOW THE MAKE COMMAND.  THE MAGTAP PROGRAM WILL IMMEDIATELY CREATE
A FILE CALLED MAGTAP.TMP ON DSK CONTAINING THE FOLLOWING:

		MAGTAP.RDI
		MAGTAP.SAV
		MAGMON.SAV
		MAGTAP.MTA
		MAGTAP.DIR
		MAGTAP.TMP

THEN EACH FILE.EXT SPECIFIED IN THE COMMAND STRING, EACH ON A
SEPARATE LINE.  EACH LINE STARTS IN COLUMN ONE.

AN EXISTING DISK INPUT FILE CAN BE REFERENCED DIRECTLY BY TYPING:

		MAKE @DEV:FILE.EXT[P,PN]

IF ONLY:

		MAKE @FILE

IS TYPED, AN INP EXTENSION AND USER'S DISK AREA IS ASSUMED.  IF THE MAKE
COMMAND IS TYPED WITH NO ARGUMENTS, @DSK:MAGTAP.INP IS ASSUMED.

THE INPUT FILE CAN CONTAIN ANY INFORMATION DESIRED, BUT ALL LINES
THAT BEGIN WITH A PRINTABLE CHARACTER IN COLUMN ONE OTHER THAN A
SEMI-COLON MUST START WITH FILE.EXT, A NUMBER SIGNIFYING THE
FILE TYPE OR A SLASH GROUP COMMAND.
MAINDEC-10-DDQDF						PAGE 9
MAGTAP


FILE TYPES ARE: EXEC, USER, SPECIAL, MONITOR, UNDEF.  THESE ARE
SPECIFIED BY AN OCTAL NUMBER CODED WITH THE APPROPRIATE BITS SET.
THIS OCTAL NUMBER IS CODED AS FOLLOWS:

		20 = UNDEF
		10 = MONITOR
		 4 = SPECIAL
		 2 = USER
		 1 = EXEC

	A 0 TYPE CODE MEANS UNSPECIFIED.

THE SLASH GROUP COMMAND IS USED TO SEPARATE FILES INTO SPECIFIED GROUPS.
THE COMMAND IS PLACED ON A LINE IN THE INPUT FILE IN THE FOLLOWING
FORMAT:

	/GROUP:ARGUMENT

THE GROUP ARGUMENTS ARE AS GIVEN UNDER THE /GROUP SWITCH COMMAND.

THE INPUT FILE IS FIRST CHECKED TO SEE THAT THE FIRST SIX FILE NAMES
SPECIFIED IN THE LIST ARE:

		MAGTAP.RDI
		MAGTAP.SAV
		MAGMON.SAV
		MAGTAP.MTA
		MAGTAP.DIR
		THE NAME OF THE INPUT FILE
MAINDEC-10-DDQDF						PAGE 10
MAGTAP


ONCE AN INPUT FILE HAS BEEN ESTABLISHED OR WRITTEN, THE MAGTAP
PROGRAM WILL SEE IF THE FILES MAGTAP.RDI AND DXMPA.A8 ARE ON THE
DISK.  IF MAGTAP.RDI DOES NOT EXIST OR DXMPA.A8 HAS A MORE RECENT
CREATION DATE, A NEW MAGTAP.RDI FILE WILL BE CREATED.  THIS WILL
BE THE FILE READ BY THE HARDWARE READ-IN OPERATION.

THE MAGTAP PROGRAM WILL THEN LOOKUP EACH FILE SPECIFIED IN THE INPUT
FILE TO OBTAIN THE VERSION NUMBER AND CREATION DATE.  THIS INFORMATION
WILL BE WRITTEN INTO TWO FILES, MAGTAP.MTA AND MAGTAP.DIR.  THE FILE
MAGTAP.MTA WILL CONTAIN THREE WORDS FOR EACH FILE PLUS A HEADER AND
A CHECKSUM WORD IN EACH RECORD.  THE MAGTAP.DIR FILE WILL BE WRITTEN
IN ASCII CHARACTERS TO BECOME THE PRINTABLE DIRECTORY OF THE MAGTAPE.
A LINE WILL BE INSERTED BEFORE THE FIRST FILE NAME CONTAINING THE
DATE AND TIME OF CREATION OF THE DIRECTORY FILE.

ALL OTHER LINES OF THE FILE WILL BE COPIED DIRECTLY FROM THE INPUT
FILE EXCEPT FOR THE FIRST 34 CHARACTERS OF EACH LINE CONTAINING A
PRINTABLE CHARACTER OTHER THAN A SEMI-COLON IN COLUMN ONE.  THESE 34
CHARACTERS WILL BE INTERPRETED AS THE FILE NAME AND EXTENSION AND WILL
BE REPLACED WITH THE FILE NUMBER ON THE MAGTAPE, THE FILE NAME,
EXTENSION, VERSION AND CREATION DATE.  FOR EXAMPLE, AN INPUT FILE
CONTAINING THE FOLLOWING LINE:

DDXXX.A10	                        DEC-SYSTEM-10 DIAGNOSTIC 

WILL PRODUCE A LINE SIMILAR TO THE FOLLOWING:

  8.  00   DDXXX  A10   0.1   23-OCT-75   128  DEC-SYSTEM-10 DIAGNOSTIC

THE MAGTAPE IS THEN REWOUND AND FILES ARE WRITTEN ONTO THE MAGTAPE
EXACTLY AS READ FROM THE DISK.  AFTER THE ENTIRE TAPE HAS BEEN WRITTEN,
THE MAGTAPE WILL BE REWOUND AND THE PROGRAM WILL ASK FOR ANOTHER
COMMAND.
MAINDEC-10-DDQDF						PAGE 11
MAGTAP

4.11	VERIFY COMMAND
	--------------

THE VERIFY COMMAND CAN BE USED TO VERIFY BEYOND A DOUBT THAT THE
MAGTAPE CAN BE READ CORRECTLY.  THE VERIFY COMMAND MAY BE FOLLOWED
BY A LIST OF FILE SPECIFICATIONS.  IF JUST THE VERIFY COMMAND IS
TYPED, THE ENTIRE TAPE IS VERIFIED.  IF ONE OR MORE FILES ARE
SPECIFIED, ONLY THOSE FILES WILL BE VERIFIED.

IN ADDITION, THE OPTIONAL /GROUP:ARG AND /TYPE:ARG SWITCHES MAY BE
USED TO VERIFY ONLY THE SELECTED FILE GROUPINGS AND/OR SELECTED FILE
TYPES.

THE VERIFY PROCESS PERFORMS THE CHECK PROCESS BUT ALSO READS THE
FILE FROM DISK AND VERIFIES THAT THE DATA MATCHES EXACTLY.  IN
ORDER TO PERFORM A VERIFY PROCESS, THE FILES TO BE VERIFIED MUST
EXIST ON THE DISK.


4.12	/LIST COMMAND
	-------------

THE /LIST COMMAND APPENDED TO THE MAKE, GET, CHECK OR VERIFY COMMAND
WILL CAUSE THE FILE NAME TO BE PRINTED WHEN THE FILE IS PROCESSED.

4.13	WILD FILE NAMES
	---------------

THE GET, CHECK & VERIFY COMMANDS MAY ALSO BE USED WITH WILD FILE NAMES
TO SELECTIVELY RESTORE OR CHECK CERTAIN CLASSES OF FILES.  A QUESTION
MARK "?" MAY BE USED TO ALLOW WILD CHARACTER MATCHING ON THE ASSOCIATED
FILE NAME CHARACTER POSITION.  AN ASTERISK "*" MAY BE USED TO MAKE
EITHER THE FILE NAME OR FILE EXTENSION WILD OR MAY BE USED TO COMPLETE
A FILE NAME OR EXTENSION AND MAKE THE REMAINING CHARACTER POSITIONS
WILD.
	EXAMPLES: *.ABC, ABCDEF.*, A??DEF.A??, A*.ABC
MAINDEC-10-DDQDF						PAGE 12
MAGTAP


4.14	/GROUP:ARGUMENT COMMAND
-------------------------------

THE /GROUP:ARGUMENT COMMAND APPENDED TO THE "GET, CHECK, VERIFY"
COMMAND IS USED TO SELECTIVELY RESTORE OR CHECK SPECIFIC GROUPS OF FILES
ON THE MAGTAPE.  THE ARGUMENTS TO THE /GROUP COMMAND ARE:

	ALL		;ALL, OVERRIDES GROUPS ON THE MAGTAPE.
	DIASUP		;DIAGNOSTIC SUPPORT
	KACPU		;KA10 CPU DIAGNOSTICS
	KICPU		;KI10 CPU DIAGNOSTICS
	KLCPU		;KL10 CPU FUNCTIONAL DIAGNOSTICS
	KLDIAG		;KL10 HARDWARE DIAGNOSTICS
	KLTIC		;KL10 HARDWARE CLOCK SCANOUT
	KLISO		;KL10 HARDWARE ISOLATION
	KLADIAG		;KL10 MODEL A DIAGNOSTICS
	KLATIC		;KL10 MODEL A CLOCK SCANOUT
	KLAISO		;KL10 MODEL A ISOLATION
	KLBDIAG		;KL10 MODEL B DIAGNOSTICS
	KLBTIC		;KL10 MODEL B CLOCK SCANOUT
	KLBISO		;KL10 MODEL B ISOLATION
	MEMORY		;MEMORY DIAGNOSTICS
	TAPE		;MAGNETIC TAPE DIAGNOSTICS
	DISK		;DISK DIAGNOSTICS
	UNIREC		;UNIT RECORD DIAGNOSTICS
	COMM		;COMMUNICATION DIAGNOSTICS
	SYSEXR		;SYSTEM EXERCISER DIAGNOSTICS
	FEDIAG		;KL10 FRONT END DIAGNOSTICS
	FESUPP		;ADDITIONAL FRONT END DIAGNOSTICS
	FLDSRV		;FIELD SERVICE SUPPORT
	SPECIAL		;SPECIAL PROGRAMS
	TOPS10		;TOPS10 MONITOR SUPPORT
	TOPS20		;TOPS20 MONITOR SUPPORT
	UNDEF1		;UNDEFINED GROUPS 1 TO 6
	UNDEF2
	UNDEF3
	UNDEF4
	UNDEF5
	UNDEF6
MAINDEC-10-DDQDF						PAGE 13
MAGTAP


4.15	/TYPE:ARGUMENT COMMAND
------------------------------

THE /TYPE:ARGUMENT COMMAND APPENDED TO THE "GET, CHECK, VERIFY"
COMMAND IS USED TO SELECTIVELY RESTORE OR CHECK SPECIFIC TYPES OF FILES
ON THE MAGTAPE.  THE /TYPE COMMAND MAY BE USED AS MANY TIMES AS
NECESSARY TO SPECIFY THE SELECTED TYPES AS THE SELECTION IS OR'ED
TOGETHER TO CREATE THE /TYPE RETREVIAL ARGUMENT.  THE ARGUMENTS TO
THE /TYPE COMMAND ARE:

	ALL		;ALL, OVERRIDES TYPES ON THE MAGTAPE.
	EXEC		;EXEC MODE DIAGNOSTICS
	USER		;USER MODE DIAGNOSTICS
	SPECIAL		;SPECIAL PROGRAMS
	MONITOR		;MONITOR SUPPORT PROGRAMS
	UNDEF		;UNDEFINED TYPE

4.16	SEARCH COMMAND
	--------------

THE SEARCH COMMAND IS USED TO SPECIFY THE DISK AREAS FROM WHICH THE
FILES ARE TO BE READ.  UP TO 20 DISK AREAS MAY BE SPECIFIED.  THIS
SEARCH LIST WILL BE USED BY THE MAKE, VERIFY AND NUMBER COMMANDS.

THE GENERAL FORM OF THE SEARCH COMMAND IS:

		SEARCH DEV:[P,PN],DEV:[P,PN],...

INDIVIDUAL DISK AREAS MUST BE SEPARATED BY COMMAS.  IF ONLY THE
DEV: IS SPECIFIED, [P,PN] DEFAULTS TO THE JOB'S P,PN.  IF ONLY
THE [P,PN] IS SPECIFIED, DEV: DEFAULTS TO DSK:.  AN INPLICIT DSK:
ALWAYS FOLLOWS THE SEARCH LIST SPECIFIED.

FOR EXAMPLE, TO MAKE OR VERIFY A MAGTAPE WITH FILES ON FS:[6,10]
AND [1,2] FROM A JOB LOGGED INTO [1,2], THE FOLLOWING SEARCH COMMAND
WOULD BE USED:

		SEARCH FS:[6,10],FS:

THIS WILL CAUSE THE MAGTAP PROGRAM TO LOOK FOR EACH FILE IN
FS:[6,10].  WHEN A FILE IS NOT FOUND THERE, MAGTAP WILL LOOK IN
FS:[1,2] NEXT. FINALLY DSK: WILL BE SEARCHED.
MAINDEC-10-DDQDF						PAGE 14
MAGTAP


4.17	OPTION COMMAND
	--------------

ANY NUMBER OF SEARCH LISTS MAY BE PLACED IN A FILE CALLED
DSK:SWITCH.INI.  THE OPTION COMMAND DIRECTS MAGTAP TO READ ONE OF
THESE LINES.  THE FORMAT OF A LINE IN SWITCH.INI IS:

		MAGTAP:NAME DEV:[P,PN],DEV:[P,PN],...

THE OPTION COMMAND TO READ THIS LINE WOULD BE:

		OPTION NAME

IF NO NAME IS SPECIFIED IN THE COMMAND, A LINE WITH NO :NAME WILL
BE READ.  AN OPTION COMMAND WITH NO NAME SPECIFIED IS AUTOMATICALLY
CALLED WHEN EVER THE MAGTAP PROGRAM IS STARTED OR RESTARTED.


4.18	NUMBER COMMAND
	--------------

THE NUMBER COMMAND IS USED TO CHANGE THE VERSION NUMBER AND THE DATE
OF A FILE ON DISK.  THIS VERSION NUMBER AND DATE WILL THEN APPEAR
IN THE MAGTAPE DIRECTORY FOR ALL SUCCEEDING MAKE COMMANDS.  THE
NUMBER COMMAND MAY BE USED ON ANY FILE ON DISK THAT DOES NOT CONTAIN
THIS INFORMATION INTERNAL TO THE FILE.  FILES WITH A SAV EXTENSION HAVE
A VERSION NUMBER IN LOCATION 137, SO UNLESS THIS LOCATION IS ZERO,
ONLY THE DATE WILL HAVE ANY EFFECT ON THE MAGTAPE DIRECTORY FILE.

FILES WITH EXTENSIONS OF A8, A10, A11, TIC AND RAM NORMALLY BEGIN
WITH A FILE ID LINE.  THIS ID LINE CONTAINS THE FILE NAME AND MAY
CONTAIN THE VERSION AND DATE.  THE VERSION AND DATE IN THIS ID LINE
(IF PRESENT) WILL BE USED RATHER THAN THOSE IN THE DISK DIRECTORY
BY THE MAKE COMMAND.

THE COMMAND FORMAT IS:

	NUMBER FILE.EXT 0.2 20-JAN-76

THIS EXAMPLE WOULD SET THE VERSION TO 0.2 AND THE DATE TO 20-JAN-76.
IF IT IS DESIRED TO CHANGE ONLY ONE OF THE FILE'S PARAMETERS, ONLY
THAT PARAMETER NEED BE SPECIFIED.  THE MONTHS SHOULD BE SPECIFIED AS
JAN, FEB, MAR, APR, MAY, JUN, JUL, AUG, SEP, OCT, NOV, DEC.
MAINDEC-10-DDQDF						PAGE 15
MAGTAP

5.0	DIRECTORY FILE DESCRIPTION MAGTAP.MTA
	-------------------------------------

THE MAGTAPE DIRECTORY FILE IS GENERATED BY THE MAGTAP PROGRAM
EACH TIME THE MAKE OPERATION IS PERFORMED.  THIS FILE CONTAINS
ALL THE NECESSARY INFORMATION ABOUT EACH FILE ON THE MAGTAPE.  THIS
FILE IS WRITTEN IN 512 WORD RECORDS AND CAN CONSIST OF AS MANY
RECORDS AS NECESSARY TO CONTAIN INFORMATION ABOUT EACH FILE.

THE FIRST WORD OF EACH DIRECTORY RECORD IS THE FILE NUMBER OF THE
FIRST FILE NAMED IN THAT RECORD.  THE FIRST DIRECTORY RECORD WILL
ALWAYS HAVE A FIRST WORD OF ZERO.  FOLLOWING THE FIRST WORD IS A THREE
WORD BLOCK FOR EACH FILE ON THE TAPE, IN THE ORDER THEY APPEAR ON
THE TAPE.  THE RIGHT HALF OF THE LAST WORD IN THE RECORD CONTAINS
AN 18 BIT CHECKSUM OF ALL THE WORDS IN THE RECORD.  THIS 18 BIT
CHECKSUM IS COMPUTED BY ADDING ALL THE 36 BIT WORDS IN THE RECORD
TOGETHER AND THEN ADDING TOGETHER THE LEFT AND RIGHT HALVES OF THE
RESULT.  THE LEFT HALF OF THE LAST WORD WILL CONTAIN A ONE IF THE
INFORMATION ON THE LAST FILE ON THE TAPE IS CONTAINED IN THIS DIRECTORY
RECORD.  OTHERWISE, THE LEFT HALF WILL ALWAYS BE ZERO.

IN THE THREE WORD BLOCK FOR EACH FILE, THE FILE NAME IS IN THE FIRST
WORD, THE LEFT HALF OF THE SECOND WORD CONTAINS THE EXTENSION AND THE
TIME THE FILE WAS CREATED IS IN THE RIGHT HALF.  THE THIRD WORD
CONTAINS THE VERSION NUMBER IN THE LEFT HALF AND THE CREATION DATE
IN THE RIGHT HALF.  THE VERSION NUMBER CONTAINS A THREE DIGIT OCTAL
EDIT NUMBER FOLLOWED BY A THREE DIGIT OCTAL VERSION NUMBER.

THE GROUP CODE INFORMATION IS CONTAINED IN THE SECOND WORD IN BIT
POSITIONS 20 THRU 24 AND THE TYPE CODE INFORMATION IS CONTAINED IN THE
SECOND AND THIRD WORD WITH THE LOW ORDER THREE BITS IN THE THIRD WORD
IN BIT POSITIONS 18 THRU 20 AND THE HI ORDER TWO BITS IN THE SECOND WORD
IN BIT POSITIONS 18 AND 19.

THE DATE AND VERSION OF THE FILE ARE OBTAINED FROM THE FILE ITSELF,
IF SO CONTAINED.  IF THIS INFORMATION IS NOT CONTAINED IN THE FILE,
THE EXTENDED DISK DIRECTORY LOOKUP INFORMATION IS USED.  THE FOLLOWING
FILES MAY CONTAIN THIS INFORMATION:

FILES WITH A SAV EXTENSION ARE READ TO DETERMINE THE CONTENTS OF
LOCATION 137.  IF THIS LOCATION IS NON-ZERO, ITS CONTENTS ARE USED
AS THE VERSION NUMBER.

FILES WITH AN EXTENSION OF A8, A10, A11, TIC AND RAM ARE READ TO
SEE IF AN ID LINE IS PRESENT AT THE BEGINNING OF THE FILE.  IF
PRESENT, A VERSION AND DATE ARE SEARCHED FOR IN THIS LINE AND ARE
THEN USED.
MAINDEC-10-DDQDF						PAGE 16
MAGTAP


6.0.	BOOTSTRAP FILE MAGTAP.RDI
	-------------------------

THIS MAGTAP PROGRAM PRODUCES A READ-IN BOOTSTRAP FILE WHICH IS
PLACED ON THE FRONT OF EVERY DIAGNOSTIC MAGTAPE.  THE FIRST RECORD
OF THIS FILE IS THE EXECUTABLE PDP-10 CODE TO PERFORM THE LOAD
AND START THE MAGMON PROGRAM WHEN ACTIVATED BY THE HARDWARE READ-IN
ON A KA10 OR KI10. THE REMAINING RECORDS OF THE FILE ARE A CORE IMAGE
OF THE DX10 MICRO-CODE.  THE MAGTAP PROGRAM READS THE DX10 MICRO-CODE
FILE DXMPA.A8 AND PRODUCES THE CORE IMAGE BEFORE GENERATING THE
READ-IN FILE.

THE READ-IN CAN BE PERFORMED ON TM10, DX10 AND RH10 TAPE CONTROL
UNITS.  FOLLOWING IS A DESCRIPTION OF OPERATION ON EACH OF THESE
CONTROL UNITS.  IF ANY ERRORS ARE DETECTED, THE PROGRAM HALTS.  THE
READ-IN PROGRAM IS NOT RESTARTABLE EXCEPT BY PRESSING THE READ-IN
BUTTON AGAIN.


6.1	READ-IN ON A TM10
	-----------------

READ-IN CAN BE DIRECTED TO EITHER OF TWO TM10'S ON A SYSTEM, A TM10
WITH DEVICE CODE OF 340 OR 350.  THE CONTROL UNIT MAY BE EITHER A
TM10A OR TM10B AND THE TM10B CAN HAVE A DF10C IN EITHER KA OR KI
MODE.  A DIAGNOSTIC MAGTAPE MUST BE MOUNTED ON DRIVE 0 OF THE SELECTED
TM10 FOR READ-IN.

				NOTE
		ALL DIAGNOSTIC MAGTAPES FOR THE TM10
		ARE WRITTEN AT 800 BPI.  TM10 TAPE
		CONTROLLERS ORIGINALLY WERE BUILT TO
		READ-IN AT 556 BPI.  BEFORE NEW DIAGNOSTIC
		MAGTAPES CAN BE READ-IN ON A TM10, AN
		ECO MUST BE INSTALLED IN THE TM10 TO
		CHANGE THIS READ-IN DENSITY TO 800 BPI.

THE HARDWARE DUMPS THE READ-IN RECORD INTO MEMORY STARTING AT
LOCATION 1000.  THE PROGRAM IS THEN STARTED.

THE READ-IN PROGRAM FIRST DETERMINES WHICH TM10 WAS USED, THEN SKIPS
THE TAPE FORWARD OVER TWO FILE MARKS AND READS THE FILE MAGMON.SAV.
THIS PROGRAM IS LOADED INTO CORE AND THEN STARTED.
MAINDEC-10-DDQDF						PAGE 17
MAGTAP


6.2	READ-IN ON A DX10
	-----------------

READ-IN CAN BE DIRECTED TO ANY OF THREE DX10'S ON A SYSTEM.  THE
ACCEPTABLE DEVICE CODES ARE 220, 224 AND 034.  THE READ-IN ACTIVATES
A BOOTSTRAP IN THE DX10 WHICH SELECTS THE FIRST ON-LINE TAPE DRIVE,
REWINDS IT AND DUMPS THE READ-IN RECORD INTO MEMORY STARTING AT
LOCATION 0.  THE PDP-10 IS THEN STARTED AT LOCATION 100.  THE TAPE
DRIVE MUST BE 9-TRACK.  THE DIAGNOSTIC MAGTAPE CAN BE WRITTEN IN
EITHER 800 BPI OR 1600 BPI.

THE READ-IN RECORD FIRST RELOCATES ITSELF TO THE MEMORY LOCATIONS
WHERE THE TM10 WOULD DUMP IT.  THE DX10 WHICH CAUSED THE READ-IN
IS FOUND BY LOOKING FOR A DX10 THAT IS RUNNING.  THE BOOTSTRAP CODE
IN THE DX10 MEMORY IS THEN MODIFIED TO READ THE DX10 MICRO-CODE (THE
REMAINING RECORDS IN THE READ-IN FILE ON THE MAGTAPE) INTO PDP-10
MEMORY.  THE MICRO-CODE IS THEN WRITTEN INTO THE DX10 MEMORY AND
STARTED.

THE MAGMON.SAV FILE IS THEN READ USING THE NORMAL DX10 MICRO-CODE.


6.3	READ-IN ON AN RH10
	------------------

READ-IN CAN BE DIRECTED TO ANY TM02 CONTROLLER ON ANY OF SIX RH10'S.
THE ACCEPTABLE DEVICE CODES OF THE RH10'S ARE 270, 274, 360, 364, 370
AND 374.  THE TM02 NUMBER MUST BE SELECTED BY THE SWITCH ON THE MAIN-
TENANCE PANEL OF THE RH10.  THE TAPE UNIT MUST BE SLAVE NUMBER 0 AND
THE DIAGNOSTIC MAGTAPE MUST BE WRITTEN AT 800 BPI.

THE RH10 REQUESTS A READ-IN OPERATION OF THE TM02 WHICH REWINDS THE
TAPE DRIVE AND THEN USES THE DF10 TO READ THE BOOTSTRAP CODE INTO
MEMORY.

				NOTE

		A DF10C MUST BE IN KA MODE OR THE
		READ-IN WILL NOT WORK.

THE MAGMON.SAV FILE IS THEN READ AND STARTED.
MAINDEC-10-DDQDF						PAGE 18
MAGTAP


7.0	ERRORS
	------

ALL ERRORS DETECTED BY THIS PROGRAM ARE REPORTED TO THE USER
BY A MESSAGE ON THE USER'S TERMINAL.  ALL ERRORS THAT PREVENT
CONTINUATION OF THE COMMAND WILL ABORT AND ASK FOR A NEW COMMAND.

ALL ERROR MESSAGES BEGIN WITH A QUESTION MARK (?) SO THAT
THIS PROGRAM CAN BE RUN UNDER A BATCH JOB, IF DESIRED.  ERROR
MASSAGES THAT ARE DUE TO A DEVICE ERROR INCLUDE AN OCTAL COPY
OF THE MONITOR DEVICE STATUS WORD.
   