;DFKCC







				IDENTIFICATION
				--------------

	PRODUCT CODE:		AH-F827A-DD

	DIAGNOSTIC CODE:	DFKCC

	PRODUCT NAME:	 	DFKCCA0 DECSYSTEM10 KL10 ADVANCED
				INSTRUCTION DIAGNOSTIC #3
				(EXTENDED INSTRUCTION)

	VERSION:		0.2

	DATE RELEASED:		JANUARY 1987

	MAINTAINED BY:		DIAGNOSTIC ENGINEERING

	AUTHOR:			JOHN R. KIRCHOFF

		        COPYRIGHT (C) 1979

	        DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.

	THIS SOFTWARE IS FURNISHED UNDER A LICENSE FOR  USE  ONLY  ON  A
	SINGLE COMPUTER SYSTEM AND MAY BE COPIED ONLY WITH THE INCLUSION
	OF THE ABOVE COPYRIGHT NOTICE.   THIS  SOFTWARE,  OR  ANY  OTHER
	COPIES  THEREOF, MAY NOT BE PROVIDED OR OTHERWISE MADE AVAILABLE
	TO ANY OTHER PERSON EXCEPT FOR USE ON SUCH SYSTEM AND TO ONE WHO
	AGREES  TO  THESE  LICENSE TERMS.  TITLE TO AND OWNERSHIP OF THE
	SOFTWARE  SHALL  AT   ALL  TIMES  REMAIN  IN  DIGITAL  EQUIPMENT
	CORPORATION.

	THE INFORMATION IN THIS DOCUMENT IS SUBJECT  TO  CHANGE  WITHOUT
	NOTICE  AND  SHOULD  NOT BE CONSTRUED AS A COMMITMENT BY DIGITAL
	EQUIPMENT CORPORATION.

	DIGITAL EQUIPMENT CORPORATION ASSUMES NO  RESPONSIBILITY FOR THE
	USE  OR  RELIABILITY  OF  ITS SOFTWARE IN EQUIPMENT WHICH IS NOT
	SUPPLIED BY DIGITAL EQUIPMENT CORPORATION.

			TABLE OF CONTENTS
			-----------------

1.0	ABSTRACT

2.0	REQUIREMENTS

2.1	EQUIPMENT

2.2	STORAGE

2.3	PRELIMINARY PROGRAMS

3.0	PROGRAM PROCEDURES

3.1	LOADING PROCEDURE

3.2	STARTING PROCEDURE

3.3	OPERATING PROCEDURE

4.0	DATA SWITCH FUNCTIONS

5.0	ERRORS

6.0	ITERATION COUNTER

7.0	OPERATIONAL VARIATIONS

8.0	LISTING

1.0	ABSTRACT

	THIS DECSYSTEM10 KL10 ADVANCED INSTRUCTION DIAGNOSTIC IS THE
	THIRD OF A SERIES OF ADVANCED INSTRUCTION DIAGNOSTICS FOR
	THE KL10.  THIS ADVANCED INSTRUCTION DIAGNOSTIC PERFORMS
	TESTING OF THE KL10 MICRO-CODE FOR THE EXTENDED INSTRUCTION SET.

	THIS INSTRUCTION SET IS FOR HANDLING STRINGS.  ALL STRING
	INSTRUCTIONS ARE IN THE EXTENDED INSTRUCTION SET, AND ALL
	THEREFORE HAVE A TWO WORD FORMAT, THE FIRST WORD BEING
	EXTEND.  THE SECOND INSTRUCTION WORD, WHOSE OWN EFFECTIVE
	ADDRESS IS E1, IS AT LOCATION E0, WHICH IS THE EFFECTIVE ADDRESS
	OF THE EXTEND.  AN INSTRUCTION THAT "OFFSETS" USES E1 AS A
	SIGNED OFFSET, IN WHICH BIT 18 IS THE SIGN.  AN INSTRUCTION THAT
	"TRANSLATES" OR "EDITS" MAKES USE OF A TRANSLATION TABLE THAT
	BEGINS AT E1.

	THE INSTRUCTIONS TESTED ARE:

	MOVES:

	MOVSLJ	-	MOVE STRING LEFT JUSTIFIED
	MOVSO	-	MOVE STING OFFSET
	MOVST	-	MOVE STRING TRANSLATED
	MOVSRJ	-	MOVE STRING RIGHT JUSTIFIED

	COMPARE STRINGS:

	CMPSL	-	SKIP IF STRING 1 LESS THAN STRING 2
	CMPSE	-	SKIP IF STRING 1 EQUAL TO STRING 2
	CMPSLE	-	SKIP IF STRING 1 LESS THAN OR EQUAL TO STING 2
	CMPSGE	-	SKIP IF STRING 1 GREATER THAN OR EQUAL TO STING 2
	CMPSN	-	SKIP IF STRING 1 NOT EQUAL TO STING 2
	CMPSG	-	SKIP IF STRING 1 GREATER THAN STRING 2

	DECIMAL CONVERSIONS:

	CVTBDO	-	CONVERT BINARY TO DECIMAL OFFSET
	CVTBDT	-	CONVERT BINARY TO DECIMAL TRANSLATED
	CVTDBO	-	CONVERT DECIMAL TO BINARY OFFSET
	CVTDBT	-	CONVERT DECIMAL TO BINARY TRANSLATED

	STRING EDITING:

	EDIT	-	EDIT STRING

2.0	REQUIREMENTS

2.1	EQUIPMENT

	A DECSYSTEM KL10 EQUIPPED WITH A MINIMUM OF 32K OF MEMORY

	CONSOLE PROCESSOR
	CONSOLE TELETYPE
	LOAD DEVICE

2.2	STORAGE

	THE PROGRAM RUNS WITHIN 32K OF MEMORY.

2.3	PRELIMINARY PROGRAMS

	PREVIOUS PROCESSOR DIAGNOSTICS

3.0	PROGRAM PROCEDURES

3.1	LOADING PROCEDURE

	THIS DIAGNOSTIC REQUIRES THAT THE DECSYSTEM KL10 SUBROUTINE
	PROGRAM BE RESIDENT IN THE DECSYSTEM KL10.

	FOLLOW THE APPROPRIATE DIAGNOSTIC LOADING PROCEDURES.

3.2	STARTING PROCEDURE

	A.  SELECT OPERATIONAL CONSOLE DATA SWITCH SETTINGS (REFER TO
	    4.0 DATA SWITCH FUNCTIONS).

	B.  EXEC MODE

	    STAND-ALONE STARTING ADDRESS IS 30000.

	C.  USER MODE

	    RUN UNDER "DIAMON".
	    THE FOLLOWING QUESTIONS WILL BE ASKED TO 
	    SELECT THE OPERATIONAL SWITCHES:

		    TELETYPE SWITCH CONTROL ? 0,S OR Y (CR) -

		    IF THE OPERATOR TYPES "Y", THE FOLLOWING QUESTIONS
		    ARE ASKED AND THE OPERATOR RESPONDS BY TYPING
		    THE ANSWER AS SIX OCTAL DIGITS REPRESENTING
		    THE DESIRED SWITCH SETTINGS.

		    SPECIFY LH SWITCHES IN OCTAL-

		    SPECIFY RH SWITCHES IN OCTAL- TYPE 0 

******			(THERE ARE NO RH SWITCHES)

		    IF THE OPERATOR TYPES "0", ZERO'S ARE USED FOR
		    THE SWITCH SETTINGS.

		    IF THE OPERATOR TYPES "S", PREVIOUSLY SET SWITCHES
		    ARE USED.  THIS IS ONLY VALID UPON RESTARTING
		    OF AN INTERRUPTED PROGRAM.

3.3	OPERATING PROCEDURE

	A.  ERROR INFORMATION MAY BE OBTAINED QUICKLY BY PRINTING 
	    ERRORS ON THE LINE PRINTER.

	B.  IN THE EVENT OF A PRINT ROUTINE FAILURE THE 'NOPNT' SWITCH
	    AND THE 'ERSTOP' SWITCH MAY BE SET TO INHIBIT PRINTOUT 
	    BUT HALT THE PROGRAM POINTING TO THE ERROR.

4.0	DATA SWITCH FUNCTIONS

	SWITCH		STATE	FUNCTION
	------		-----	--------

	0    ABORT	0	NORMAL OPERATION
			1	ABORT AT END OF PASS

	1    RSTART		NOT USED

	2    TOTALS		NOT USED

	3    NOPNT	0	NORMAL TYPEOUT
			1	INHIBIT ALL PRINT/TYPEOUT
				(EXCEPT FORCED)

	4    PNTLPT	0	NORMAL OUTPUT TO TTY
			1	PRINT ALL DATA ON LPT
				(LOGICAL DEVICE, USER MODE)

	5    DING	0	NO FUNCTION
			1	RING TTY BELL ON ERROR

	6    LOOPER	0	PROCEED TO NEXT TEST
			1	ENTER LOOP ON TEST ERROR

	7    ERSTOP	0	NO FUNCTION
			1	HALT ON TEST ERROR

	8    PALERS	0	PRINT ONLY FIRST ERROR WHEN LOOPING
			1	PRINT ALL ERRORS, EVEN IF SAME ERROR

	9    RELIAB	0	FAST CYCLE (1 PASS)
			1	REPETITION COUNT OF 10

	10   TXTINH	0	PRINT FULL ERROR MESSAGES.
			1	INHIBIT COMMENT PORTION OF 
				ERROR MESSAGES.

	11   INHPAG	0	ALLOW PAGING AND TRAP ENABLE
			1	INHIBIT PAGING AND TRAPPING

	12   MODDVC		NOT USED

	13   INHCSH	0	ALLOW CACHE USE
			1	INHIBIT CACHE

5.0	ERRORS

	ERRORS ARE PRINTED ON THE TTY OR LINE PRINTER. THERE ARE
	TWO TYPES OF PROGRAM ERROR PRINTOUT.
	THE FIRST TYPE IS THE STANDARD SUBROUTINE PACKAGE ERROR MACRO
	PRINTOUT. IT IS USED FOR REPORTING ERRORS IN THE MUUO TRAP TESTING
	AND THE PAGE FAIL TEST.
	PRINTOUT CONTAINS THE TEST TITLE, THE PC OF THE FAILURE, ERROR
	NUMBER AND THE CONTENTS OF AN APPLICABLE AC (CORRECT DATA,
	ACTUAL DATA,	AND THE DISCREPANCY BETWEEN THE TWO.)

	THE PC VALUE IS USEFUL IN RELATING THE FAILURE TO THE LISTING.
	THE ERROR NUMBER IS PROVIDED SUCH THAT AN ERROR DICTIONARY MAY
	BE MADE AT SOME FUTURE DATE.

	THE SECOND TYPE IS IMPLEMENTED COMPLETELY IN THE PROGRAM.
	THIS TYPE OF ERROR REPORT IS USED IN ALL INSTRUCTION CASE
	TESTING, AND THE INTERRUPTABILITY TEST.
	PRINTOUT FOR CASE TESTING ERROR CONTAINS THE INITIAL AC BLOCK
	DATA, ACTUAL AC BLOCK RESULT, AND CORRECT AC BLOCK RESULT.
	DEPENDING ON THE INSTRUCTION THE SOURCE,DESTINATION AND SIMULATED
	DESTINATION STRINGS ARE PRINTED. E0+1 AND E0+2 WORDS ARE PRINTED
	IF APPLICABLE. IF THE INSTRUCTION TOOK AN INCORRECT SKIP OR NON-
	SKIP RETURN THIS IS ALSO PRINTED.

6.0	ITERATION COUNTER

	THE ITERATION COUNT OF THE PROGRAM IS PRINTED BY THE
	CONSOLE PROCESSOR.


7.0	OPERATIONAL VARIATIONS

	A.  DIAGNOSTIC MONITOR

	    THE PROGRAM IS USABLE WITH THE DIAGNOSTIC MONITOR TO PROVIDE
	    RELIABILITY AND ACCEPTANCE TESTS FOR THE EXTENDED
	    INSTRUCTION SET MICRO-CODE. THE FOLLOWING INFORMATION MAY
	    BE USEFUL:

	    1.	THE DIAGNOSTIC MONITOR TRANSFERS CONTROL TO THE PROGRAM
		AND STARTS IT AT LOCATION 30002.

	    2.	MONCTL - LOCATION 30043 IS USED AS THE DIAGNOSTIC MONITOR
		CONTROL WORD.
			LH = 0, STAND-ALONE OPERATION
			    -1, RUNNING UNDER DIAGNOSTIC MONITOR

			RH = RIGHT HALF OF CONSOLE SWITCHES IF UNDER
			     DIAGNOSTIC MONITOR CONTROL.

	B.  USER MODE

	    TO OUTPUT THE PRINTED ERROR MESSAGES TO A USER SPECIFIED
	    DEVICE IN USER MODE, ASSIGN THE DESIRED OUTPUT DEVICE TO
	    DEVICE NAME 'DEV' AND SET SWITCH 'PNTLPT'.  THE PHYSICAL
	    DEVICE USED CAN BE ANY DEVICE THAT CAN ACCEPT ASCII OUTPUT
	    FORMAT SUCH AS LPT, DSK, DTA, ETC.  THE CORRESPONDING 
	    OUTPUT FILE IS 'DSKCB.LPT'

	    EXAMPLE DEVICE ASSIGNMENT:

	    .ASSIGN DSK DEV

	    IN USER MODE THE PROGRAM WILL MAKE 1000(8) PASSES AND THEN
	    RETURN TO SMMON COMMAND MODE.

7.0	OPERATIONAL VARIATIONS (CON'T)

	THE OUTPUT FILE (IF USED) MAY THEN BE LISTED BY USING THE
	NORMAL MONITOR COMMANDS (PRINT, LIST, TYPE, PIP, ETC.).

	IF THE PROGRAM IS ABORTED BEFORE COMPLETION (BY ^C, ETC.) THE
	OUTPUT FILE MAY BE CLOSED BY USING THE MONITOR 'REENTER' 
	COMMAND.

	C.  SYSTEM EXERCISER

	    START ADDRESS IS 30003.  DATA SWITCHES ARE PRESTORED IN
	    'SWTEXR' LOC 30023.

8.0	LISTING
   